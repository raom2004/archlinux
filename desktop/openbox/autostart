#
# These things are run when an Openbox X Session is started.
# You may place a similar script in $HOME/.config/openbox/autostart
# to run user-specific things.
#
# CODE:

### FUNCTIONS DECLARATION

############################################################
# Description:
#  function to open multiple urls in firefox with private mode
# pass an array as argument for a function
#  source:
#  https://duckduckgo.com/?q=bash+use+list+as+function+argument&t=ffab&atb=v344-5&ia=web&iax=qa
############################################################

function open_urls_in_firefox {
    a=("$@")
    for i in "${a[@]}" ; do
        firefox --private-window "$i" &
    done
}


### ESSENTIAL SETUP 

## Keyboard Setup (set in script 2 instead)
xmodmap -e "keysym XF86Eject = BackSpace"

## deactivate screen saver
(sleep 40 && xset s 0 0) &

## Screen Brigthness Setup
if grep -i apple /sys/devices/virtual/dmi/id/board_vendor; then
    brightnessctl set 25% &
else
  brightnessctl set 50% &
fi

## Set Background
~/.fehbg &

## Bar
tint2 &

## Tray Icons
pasystray &		# sound volume icon
nm-applet &             # network manager
xfce4-power-manager &   # battery info

## permission to mount drives
/usr/lib/polkit-gnome/polkit-gnome-authentication-agent-1 &

## automount usb
udiskie --notify --automount --tray &

## Composite Manager
picom &

## System Monitor Software
(sleep 3 && conky) &

## amixer volume and musik player: run when sound card is recognixed
sh -c "until aplay -l | grep PCH; do sleep 10; done" \
    && (sleep 4 && sh -c "amixer sset Master unmute") \
    && (sleep 2 && sh -c "amixer set Master 2%+") \
    && (sleep 2 && sh -c "amixer set Master 25%") \
    && (sleep 2 && sh -c "audacious --headless --play") &


### START PROGRAMS

## File Manager
thunar --daemon &
(sleep 4 && thunar $HOME/Projects/archlinux) &
(sleep 4 && thunar $HOME/Projects/archlinux/desktop/openbox) &
(sleep 4 && thunar $HOME/Projects/dot-emacs) &

## Terminal
open_xterm_custom "$HOME/Projects/archlinux/desktop/openbox" left
open_xterm_custom "$HOME/Projects/archlinux" middle
open_xterm_custom "$HOME/Projects/dot-emacs"


## Webbroser : open unique url in privat mode

# url='https://wiki.archlinux.org/title/Openbox' \
#    | firefox --private-window "${url}" &

## Webbroser : open multiples urls in private mode

# vim cheat sheet and cron
# urls=(
#     # cron
#     'https://wiki.archlinux.org/title/Cron'
#     # vim cheat sheet (pdf)
#     '/run/media/angel/KN28/emacshome/documents/reference/Programming(software-engineering)/vim/vim-commands-cheat-sheet-by-pnap.pdf'
# )
# open_urls_in_firefox "${urls[@]}"

urls=(
    # vim command cheat sheet
    'https://phoenixnap.com/kb/vim-commands-cheat-sheet'

    # cron
    'https://wiki.archlinux.org/title/Cron'

    # openbox example for window snapping
    'https://wiki.archlinux.org/title/Openbox#Window_snapping'
    'http://openbox.org/wiki/Help:Actions#GrowToEdge'
    'https://aur.archlinux.org/packages/opensnap'
)

open_urls_in_firefox "${urls[@]}"

## text/code editor
emacs &


# emacs:
# Local Variables:
# mode:Shell-script
# sh-basic-offset:2
# End:

# vim: set ts=2 sw=2 et:
